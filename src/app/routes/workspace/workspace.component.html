<link rel="stylesheet" href="workspace.component.css">

<div class="layout flex">
    <div class="flex icons">
        <img class="icon" src="flashcard.png" alt="Flashcard" (click)="startSession()">
        <div class="flex">
            <a class="upload" (click)="uploadFolder()"><img class="icon" src="upload.png" alt="Upload"></a>
            <button (click)="goToStats()"><img class="icon" src="informacion.png" alt="About"></button>
            <a class="ml-1 delete" (click)="deleteFolderConfirmation()"><img class="icon" src="delete.png" alt="Delete"></a>
        </div>
    </div>
    <div *ngIf="uploading" class="upload-overlay">
        <div class="upload-container">
            <div class="upload-form">
                <h3>Workspace Details</h3>
                <div class="form-group">
                    <label for="workspaceDescription">Description</label>
                    <textarea 
                        id="workspaceDescription" 
                        class="description-editor" 
                        [(ngModel)]="workspace.description" 
                        placeholder="Enter workspace description">
                    </textarea>
                </div>
                <div class="form-group">
                    <label for="workspaceImage">Image URL</label>
                    <input 
                        type="text" 
                        id="workspaceImage" 
                        class="image-editor" 
                        [(ngModel)]="workspace.img" 
                        placeholder="Enter image URL">
                </div>
                <div class="button-group">
                    <button class="cancel-button" (click)="cancelUpload()">Cancel</button>
                    <button class="save-button" (click)="saveWorkspaceDetails()">Save</button>
                </div>
            </div>
        </div>
    </div>
    <textarea class="workspace-name" [(ngModel)]="workspace.name" (ngModelChange)="saveWorkspaceName()"></textarea>
    <div class="folders">
        <button *ngFor="let folder of folders; let i = index" class="button folder" (click)="openFolder(folder.id)">{{ folder.name }}</button>
        <button class="button folder" (click)="onCreateFolder($event)">+</button>
    </div>
    <hr class="separator">
    <div class="notes flex">
        <div class="flex">
            <h2 class="note-title">Notes</h2>
            <i class="bi bi-pencil pencil"></i>
        </div>
        <st-editor [(ngModel)]="note" [config]="config" (ngModelChange)="saveNote()" class="editor"></st-editor>
        <h1 class="flashcardtitle">Flashcards</h1>
    </div>
    <div class="flashcards">
        <button *ngFor="let flashcard of flashcards; let i = index" class="flashcard max-w-sm rounded overflow-hidden shadow-lg button" (click)="openFlashcard(flashcard.id, workspaceId)">
            <div class="px-6 py-4">
                <div class="font-bold text-xl mb-2">{{flashcard.title}}</div>
                <p class="text-white-700 text-base">{{flashcard.question}}</p>
            </div>
        </button>
        <button class="flashcard flashcard-more max-w-sm rounded overflow-hidden shadow-lg button" (click)="onCreateFlashcard()">
            <p class="text-gray-700 text-base plus">+</p>
        </button>
    </div>

    <div *ngIf="showFlashcardEditor" class="flashcard-editor-overlay">
        <div class="flashcard-editor-container">
            <div class="flashcard-editor-form">
                <h3>Edit Flashcard</h3>
                <div class="form-group">
                    <label for="flashcardTitle">Title</label>
                    <input 
                        type="text" 
                        id="flashcardTitle" 
                        class="title-editor" 
                        [(ngModel)]="editingFlashcard.title" 
                        placeholder="Enter flashcard title">
                </div>
                <div class="button-group">
                    <button class="cancel-button" (click)="cancelEditFlashcard()">Cancel</button>
                    <button class="save-button" (click)="saveFlashcardTitle()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="showDeleteConfirmation" class="delete-folder-confirmation-overlay">
        <div class="delete-folder-confirmation-container">
            <div class="delete-folder-confirmation-form">
                <h3>Are you sure you want to delete this folder?</h3>
                <div class="delete-button-group">
                    <button class="cancel-button" (click)="cancelDeleteFolder()">Cancel</button>
                    <button class="delete-button" (click)="deleteFolder()">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>